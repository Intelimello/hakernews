import 'package:flutter_test/flutter_test.dart';
import 'package:hakernews/Utils/json_parsing.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString =
        "[38750411,38749434,38748370,38750459,38745668,38749170,38749473,38745348,38749057,38750079,38750138,38733004,38717878,38748433,38749155,38746221,38748120,38731402,38743683,38745970,38731743,38745673,38745667,38732272,38732223,38744168,38745070,38748943,38744588,38746460,38744791,38733617,38745315,38712798,38744224,38743588,38719346,38726898,38745637,38719644,38748280,38750330,38749793,38732545,38750254,38733446,38750562,38747892,38747747,38748249,38747517,38746926,38748921,38746478,38747988,38742637,38720036,38744789,38744747,38746187,38743867,38742694,38735066,38749476,38750164,38749259,38749917,38724665,38747191,38743719,38744296,38733968,38733282,38743062,38747151,38750121,38748087,38734106,38743718,38732542,38742324,38747543,38744824,38750009,38747738,38738336,38720057,38749956,38747509,38747423,38719766,38706072,38717378,38739563,38732466,38742942,38732770,38719439,38747094,38695478,38749614,38740544,38732049,38729707,38736054,38715111,38735725,38732804,38742692,38737747,38707655,38728172,38710874,38737081,38748174,38739130,38737262,38736419,38739086,38732254,38734164,38744438,38695258,38732401,38733384,38743295,38719511,38740793,38720412,38741536,38681861,38746699,38748895,38747367,38736525,38732862,38732160,38748052,38706299,38747294,38739033,38732713,38733264,38718314,38744092,38738619,38742497,38744678,38728435,38747434,38744785,38719126,38743822,38719971,38715186,38738431,38737326,38727987,38735448,38738648,38719163,38707847,38733208,38723799,38732825,38736798,38718020,38708730,38710318,38708585,38730455,38712892,38742446,38737028,38730979,38746117,38741081,38719249,38707324,38696612,38730143,38728765,38724729,38746664,38729696,38726533,38726370,38721604,38733241,38706831,38698907,38730966,38710030,38723309,38741315,38746758,38713615,38718013,38732540,38725264,38729684,38725442,38717725,38749775,38722246,38725817,38706989,38729278,38734420,38739199,38741228,38733356,38743486,38706483,38699576,38740280,38711075,38718306,38744690,38746008,38706914,38712326,38722292,38730752,38739259,38720248,38745771,38730070,38732781,38708743,38668906,38739361,38718544,38718244,38740575,38713215,38744414,38737113,38742398,38748126,38708606,38719843,38725015,38671876,38733307,38701780,38749080,38691205,38708010,38730790,38709319,38713167,38695750,38731862,38726389,38720369,38744977,38720249,38703943,38697000,38672112,38740239,38698782,38701043,38736919,38739158,38694278,38731355,38744647,38738096,38743485,38732306,38730107,38715474,38702271,38733855,38733726,38738106,38713927,38698259,38746162,38749417,38691468,38747485,38737691,38720544,38712883,38733154,38744408,38741751,38694880,38742954,38734773,38732722,38719586,38696764,38711494,38740138,38684295,38691447,38699343,38727252,38732300,38729035,38682631,38711174,38730235,38706697,38720656,38684102,38697752,38723509,38699201,38689869,38716267,38710709,38693439,38718537,38720226,38725930,38704725,38697227,38708185,38741002,38734138,38695091,38732408,38726182,38688127,38724327,38733785,38730712,38702276,38692167,38700060,38695337,38709734,38733720,38746530,38695047,38694051,38693984,38728278,38713055,38693469,38686221,38678021,38720615,38732628,38719188,38668713,38737734,38733142,38680239,38693200,38708436,38706951,38741905,38710387,38707475,38694719,38718702,38735409,38718043,38675258,38744771,38693421,38715286,38694004,38717873,38741797,38699223,38728061,38744531,38707995,38705535,38733707,38697723,38711135,38701326,38700779,38736904,38683594,38696523,38704704,38711007,38738851,38683178,38680346,38672762,38722911,38723413,38707344,38725167,38695377,38730670,38708471,38697650,38741265,38676942,38692477,38734425,38735958,38684461,38691583,38695453,38725478,38700805,38676563,38699331,38738072,38692023,38682623,38710600,38701327,38720471,38744664,38677185,38700552,38738704,38741969,38697195,38710479,38708926,38728160,38736212,38739251,38721865,38719309,38714674,38684447,38709041,38704232,38685239,38709172,38694001,38693603,38712802,38680950,38702083,38696631,38732706,38689653,38667503,38716032,38701822,38728768,38682204,38681115,38704215,38734289,38704982,38726025,38719048,38684904,38699010,38701751,38688453,38737777,38681468,38721039,38706781,38740417,38687357,38679453,38690209,38686997,38673854,38741417,38697038,38739357,38688355,38673973,38715298,38697309,38731812,38671377,38692715,38732520,38740847,38746118,38686207,38715230,38710818,38726317,38693120,38691025,38739250,38743750,38723399,38713514,38677628,38691776,38684252,38679078,38711003,38684368,38742508,38733440,38739292]";
    expect(parseTopStories(jsonString).first, 38750411);
  });
  test("parses articles.json", () {
    const jsonString =
        """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8884,8887,8952,8869,8873,8958,8940,8908,9005,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";
    expect(parseArticle(jsonString).descendants, 71);
  });
}
